syntax = "proto3";

option go_package = "github.com/idastroem-gmbh/swupdate";
option java_multiple_files = true;
option java_package = "de.idastroem.swupdate";
option java_outer_classname = "SwUpdate";

package swupdate;

service Updater {
    rpc AnalyzeZipFile(AnalyzeRequest) returns (AnalyzeResponse) {}
    rpc ExecuteUpdate(UpdateRequest) returns (stream UpdateResponse) {}
    rpc Reboot(Empty) returns (Empty) {}
}

message Empty {

}

message AnalyzeRequest {
    string zipFileLocation = 1;
    string password = 2;
}

message AnalyzeResponse {
    string engineVersion = 1;
    bool isOkay = 2;
    string errorMessage = 3;
    map<string,string> userData = 4;
}

message UpdateRequest {
}

message UpdateResponse {
    float progress = 1;
    bool done = 2;
}
